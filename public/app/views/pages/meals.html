<md-card>
  <md-card-content ng-init="meals.myMeals()">
    <form ng-submit="meals.askMeal()">
      <md-input-container>
        <label>Introduce tu número</label>
        <input name="clientName" type="number" ng-model="meals.mealAsked.id">
      </md-input-container>

          <md-input-container>
            <label>Cambio</label>
            <md-select ng-model="meals.mealAsked.change">
              <md-option ng-repeat="request in meals.possibleRequests" value="{{ request.id }}">
                {{request.name }}
              </md-option>
            </md-select>
          </md-input-container>

          <md-datepicker md-min-date="meals.currentDate" ng-model="meals.mealAsked.date" md-placeholder="Fecha">
          </md-datepicker>

        <md-button type="submit" id="MealsButton" class="md-raised" ng-class="meals.MealError ? 'md-warn' : 'md-primary'" aria-label="Enviar">
        <span>{{ meals.mealButtontext }}</span>
      </md-button>
    </form>

    <p ng-init="meals.getLastDay()">Fecha mínima actual: <b>{{meals.currentDate | date : 'dd-MM-yyyy' }}</b></p>

    <h2>Mis pedidos</h2>
    <md-divider ></md-divider>
      <md-list-item class="md-3-line" ng-repeat="request in meals.myRequests| orderBy:'date'">
        <div class="md-list-item-text">
        <h3><b>{{ request.id }}</b></h3>
        <h4>{{ request.change }}</h4>
        <p>{{ request.date | date:'dd-MM-yyyy' }}</p>
        </div>
        <md-button class="md-warn" ng-click="meals.deleteRequest(request._id)">Borrar</md-button>
      </md-list-item>

  </md-card-content>
</md-card>


<md-card ng-if="$root.userData.meals == true">
  <md-card-content>

    <md-button id="MealsButton" class="md-raised md-warn" aria-label="Actualizar" ng-click="meals.NewDate()">
      <span>Actualizar fecha</span>
    </md-button>

    <md-button id="MealsButton" class="md-raised md-primary" aria-label="Ver lista" href="/mealrequests">
      <span>Ver Comidas</span>
    </md-button>

  </md-card-content>
</md-card>